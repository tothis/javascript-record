<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>speech</title>
</head>
<body>
<script>
    /**
     * 语音识别
     */
    let newRecognition = new webkitSpeechRecognition();

    // true一直识别 false识别到声音就关闭
    newRecognition.continuous = true;

    // 语音识别
    newRecognition.start();
    // 语音识别关闭
    newRecognition.stop();

    // 接收消息后会触发onresult事件
    newRecognition.onresult = function (event) {
        console.log(event);
    }

    newRecognition.onsoundstart = (e) => {
        console.log("开始收听了");
        console.log(e);
    }
    newRecognition.onspeechstart = (e) => {
        console.log("开始讲话了");
        console.log(e);
    }
    newRecognition.onspeechend = (e) => {
        console.log("讲话完毕");
        console.log(e);
    }
    newRecognition.onerror = (e) => {
        console.log("发生异常");
        console.log(e);
    }

    /**
     * 语音合成
     */
    let synthesisUtterance = new window.SpeechSynthesisUtterance('hi 李磊');
    window.speechSynthesis.speak(synthesisUtterance);

    window.addEventListener('click', () => {
        // 点击暂停
        window.speechSynthesis.pause();
    });
    /**
     * top() 停止合成
     * pause() 暂停合成
     * resume() 重新开始合成
     * getVoices() 返回浏览器支持的语音包数组
     */
    console.log(window.speechSynthesis.getVoices());
</script>
</body>
</html>
